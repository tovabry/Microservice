services:
  gateway:
    image: gateway:0.0.1-SNAPSHOT
    ports:
      - "8080:8081"
    networks:
      - microservices-network
    environment:
      - SPRING_PROFILES_ACTIVE=docker

  spa:
    image: spa:0.0.1-SNAPSHOT
    ports:
      - "7000:7000"
    networks:
      - microservices-network
    environment:
      - SPRING_PROFILES_ACTIVE=docker

  auth:
    container_name: authservice
    image: authservice:0.0.1-SNAPSHOT
    ports:
      - "9000:9000"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    networks:
      - microservices-network

  jokeservice:
    image: jokeservice:0.0.1-SNAPSHOT
    networks:
      - microservices-network
    environment:
      - SPRING_PROFILES_ACTIVE=docker

  quoteservice:
    image: quoteservice:0.0.1-SNAPSHOT
    networks:
      - microservices-network
    environment:
      - SPRING_PROFILES_ACTIVE=docker
    deploy:
        replicas: 2

  consul:
    image: hashicorp/consul
    ports:
      - "8500:8500"
    command: [ "consul", "agent", "-server", "-dev", "-bootstrap", "-ui", "-client=0.0.0.0" ]
    networks:
      - microservices-network


networks:
  microservices-network:
    driver: bridge